<div *ngIf="isLoading" class="loading-spinner">
    <div class="custom-spinner"></div>
    <p class="loading-text">Loading tours...</p>
</div>

<div *ngIf="!isLoading">
    <div id="bundle-create">
        <h2>Create Bundle</h2>
        <hr>

        <div class="tour-cards">
            <div class="tour-card" *ngFor="let t of tours" [class.selected]="selectedTours.includes(t)">
                <mat-card>
                    <mat-card-header>
                        <mat-card-title>{{ t.name }}</mat-card-title>
                        <mat-card-subtitle>{{ t.description }}</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <p>Price: {{ t.price | currency }}</p>
                    </mat-card-content>
                    <mat-card-actions>
                        <button mat-button (click)="toggleTourSelection(t)">
                            {{ selectedTours.includes(t) ? 'Deselect' : 'Select' }}
                        </button>
                    </mat-card-actions>
                </mat-card>
            </div>
        </div>

        <div id="bundle-price">
            <p>Total Price: {{ totalPrice | currency }}</p>
            <mat-form-field>
                <mat-label>New Price</mat-label>
                <input matInput type="number" [(ngModel)]="newPrice" placeholder="Enter new bundle price" />
            </mat-form-field>

            <mat-form-field>
                <mat-label>Title</mat-label>
                <input matInput type="text" [(ngModel)]="newTitle" placeholder="Enter bundle title" />
            </mat-form-field>

            <button mat-raised-button color="primary" (click)="createBundle()" [disabled]="selectedTours.length < 2">
                Create Bundle
            </button>
        </div>
    </div>
</div>